# Echo Chamber Web - ä»£ç åº“æ€»ç»“æ–‡æ¡£

## ğŸ“‹ é¡¹ç›®æ¦‚è¿°

**Echo Chamber** æ˜¯ä¸€ä¸ªåŸºäº Web çš„äº’åŠ¨å¼æ–‡å­—å†’é™©æ¸¸æˆï¼Œé‡‡ç”¨çº¯ JavaScript å®ç°ï¼Œæ— éœ€ä»»ä½•æ¡†æ¶ã€‚æ¸¸æˆé€šè¿‡å¯¹è¯ç³»ç»Ÿã€äº”æ„Ÿå±•ç¤ºç³»ç»Ÿå’ŒèƒŒæ™¯æ•ˆæœç³»ç»Ÿï¼Œä¸ºç©å®¶æä¾›æ²‰æµ¸å¼çš„å™äº‹ä½“éªŒã€‚

**æ ¸å¿ƒç‰¹è‰²**ï¼š
- ğŸ­ **ç§‘å¹»æ‚¬ç–‘å‰§æƒ…**ï¼šå¤±å¿†ä¸»è§’åœ¨ç¥ç§˜å°é—­ç¯å¢ƒä¸­çš„æ¢ç´¢
- ğŸ¨ **æç®€è®¾è®¡**ï¼šçº¯æ–‡å­—ç•Œé¢ï¼Œæ— å¤æ‚UIå…ƒç´ 
- ğŸ¯ **äº”æ„Ÿç³»ç»Ÿ**ï¼šé€šè¿‡æ„Ÿå®˜ä½“éªŒè¥é€ æ²‰æµ¸æ„Ÿ
- ğŸ”„ **å¾ªç¯ç»“æ„**ï¼šå¤šå¾ªç¯å™äº‹ï¼Œæ¯æ¬¡éƒ½æœ‰æ–°å‘ç°

---

## ğŸ—‚ï¸ é¡¹ç›®ç»“æ„

```
EchoChamber_Web/
â”œâ”€â”€ index.html                    # ä¸»å…¥å£æ–‡ä»¶
â”œâ”€â”€ css/                         # æ ·å¼æ–‡ä»¶ç›®å½•
â”‚   â”œâ”€â”€ main.css                 # ä¸»æ ·å¼æ–‡ä»¶
â”‚   â”œâ”€â”€ dialogue.css             # å¯¹è¯ç³»ç»Ÿæ ·å¼
â”‚   â”œâ”€â”€ background.css           # èƒŒæ™¯æ•ˆæœæ ·å¼
â”‚   â””â”€â”€ continuous-sense.css     # äº”æ„Ÿæ˜¾ç¤ºæ ·å¼
â”œâ”€â”€ js/                          # JavaScript ä»£ç ç›®å½•
â”‚   â”œâ”€â”€ core/                    # æ ¸å¿ƒç³»ç»Ÿ
â”‚   â”‚   â”œâ”€â”€ GameManager.js       # æ¸¸æˆä¸»ç®¡ç†å™¨
â”‚   â”‚   â”œâ”€â”€ DialogueSystem.js    # å¯¹è¯ç³»ç»Ÿ
â”‚   â”‚   â”œâ”€â”€ SimpleSenseSystem.js # äº”æ„Ÿæ˜¾ç¤ºç³»ç»Ÿï¼ˆæ”¯æŒå·¦å³åˆ†ç¦»ï¼‰
â”‚   â”‚   â””â”€â”€ BackgroundManager.js  # èƒŒæ™¯ç®¡ç†å™¨
â”‚   â”œâ”€â”€ story/                   # å‰§æƒ…ç›¸å…³
â”‚   â”‚   â”œâ”€â”€ StoryManager.js      # å‰§æƒ…ç®¡ç†å™¨
â”‚   â”‚   â””â”€â”€ EnhancedDeepSkyScript.js # æ¸¸æˆå‰§æœ¬
â”‚   â””â”€â”€ utils/                   # å·¥å…·å‡½æ•°
â”‚       â”œâ”€â”€ AudioManager.js      # éŸ³é¢‘ç®¡ç†å™¨ï¼ˆå·²ç¦ç”¨ï¼‰
â”‚       â””â”€â”€ Logger.js            # æ—¥å¿—å·¥å…·
â”œâ”€â”€ docs/                        # æ–‡æ¡£ç›®å½•
â”‚   â”œâ”€â”€ DEV_LOG.md              # å¼€å‘æ—¥å¿—
â”‚   â””â”€â”€ SENSE_SYSTEM_GUIDE.md   # äº”æ„Ÿç³»ç»ŸæŒ‡å—
â””â”€â”€ README.md                   # é¡¹ç›®è¯´æ˜
```

---

## ğŸ“„ æ ¸å¿ƒæ–‡ä»¶è¯¦è§£

### 1. **index.html** - ä¸»å…¥å£æ–‡ä»¶

**ç”¨é€”**ï¼šæ¸¸æˆçš„ HTML ç»“æ„å’Œå¯åŠ¨å…¥å£

**ä¸»è¦åŠŸèƒ½**ï¼š
- å®šä¹‰æ¸¸æˆçš„ DOM ç»“æ„
- åŠ è½½æ‰€æœ‰ CSS å’Œ JavaScript æ–‡ä»¶
- åˆå§‹åŒ–æ¸¸æˆå¯åŠ¨æµç¨‹
- åŒ…å« SVG æ»¤é•œå®šä¹‰ï¼ˆæ¯›ç»ç’ƒæ•ˆæœï¼‰

**å…³é”® DOM å…ƒç´ **ï¼š
```html
<div id="game-container">           <!-- æ¸¸æˆä¸»å®¹å™¨ -->
<div id="loading-screen">           <!-- åŠ è½½å±å¹• -->
<div id="dialogue-container">       <!-- å¯¹è¯å®¹å™¨ -->
<div id="simple-sense-container">   <!-- äº”æ„Ÿæ˜¾ç¤ºå®¹å™¨ -->
<div id="background-container">     <!-- èƒŒæ™¯æ•ˆæœå®¹å™¨ -->
```

**å¯åŠ¨æµç¨‹**ï¼š
1. æ˜¾ç¤ºåŠ è½½å±å¹•
2. åˆå§‹åŒ–æ‰€æœ‰ç³»ç»Ÿï¼ˆGameManager, DialogueSystem, SimpleSenseSystem, BackgroundManagerï¼‰
3. èƒŒæ™¯é¢œè‰²è¿‡æ¸¡ï¼ˆä»æ·±è‰²åˆ°æ¸¸æˆèƒŒæ™¯è‰²ï¼‰
4. æ·¡å‡ºåŠ è½½å±å¹•
5. å¯åŠ¨æ¸¸æˆä¸»å¾ªç¯

---

### 2. **css/main.css** - ä¸»æ ·å¼æ–‡ä»¶

**ç”¨é€”**ï¼šå®šä¹‰æ¸¸æˆçš„æ•´ä½“è§†è§‰é£æ ¼å’Œå¸ƒå±€

**ä¸»è¦æ ·å¼**ï¼š
- **å…¨å±€æ ·å¼**ï¼šé‡ç½®é»˜è®¤æ ·å¼ï¼Œè®¾ç½®å­—ä½“å’Œé¢œè‰²
- **æ¸¸æˆå®¹å™¨**ï¼šå…¨å±å¸ƒå±€ï¼Œæ·±è‰²èƒŒæ™¯
- **åŠ è½½å±å¹•**ï¼šå±…ä¸­æ˜¾ç¤ºï¼Œå¸¦æ·¡å…¥æ·¡å‡ºåŠ¨ç”»
- **å“åº”å¼è®¾è®¡**ï¼šé€‚é…ä¸åŒå±å¹•å°ºå¯¸

**å…³é”®æ ·å¼**ï¼š
```css
body {
    background: linear-gradient(135deg, #0a0a2a 0%, #1a1a3a 100%);
    color: #e0e0e0;
    font-family: 'Microsoft YaHei', sans-serif;
}

#game-container {
    width: 100vw;
    height: 100vh;
    overflow: hidden;
}
```

---

### 3. **css/dialogue.css** - å¯¹è¯ç³»ç»Ÿæ ·å¼

**ç”¨é€”**ï¼šå®šä¹‰å¯¹è¯æ¡†çš„å¤–è§‚å’ŒåŠ¨ç”»æ•ˆæœ

**ä¸»è¦æ ·å¼**ï¼š
- **å¯¹è¯å®¹å™¨**ï¼šå±…ä¸­æ˜¾ç¤ºï¼ŒåŠé€æ˜èƒŒæ™¯ï¼Œæ¯›ç»ç’ƒæ•ˆæœ
- **è¯´è¯è€…åç§°**ï¼šä¸åŒè§’è‰²ä½¿ç”¨ä¸åŒé¢œè‰²
- **å¯¹è¯æ–‡æœ¬**ï¼šæ‰“å­—æœºæ•ˆæœçš„æ–‡æœ¬æ˜¾ç¤º
- **ç»§ç»­æç¤º**ï¼šé—ªçƒåŠ¨ç”»æç¤ºç©å®¶ç»§ç»­

**å…³é”®æ ·å¼**ï¼š
```css
#dialogue-container {
    position: fixed;
    bottom: 10%;
    left: 50%;
    transform: translateX(-50%);
    width: 80%;
    max-width: 800px;
    background: rgba(10, 10, 42, 0.85);
    backdrop-filter: blur(10px);
    border: 2px solid #4fc3f7;
    border-radius: 12px;
}

.speaker-protagonist { color: #4fc3f7; }  /* ä¸»è§’ */
.speaker-narrator { color: #ff6b6b; }     /* æ—ç™½ */
.speaker-deepsky { color: #51cf66; }      /* DeepSky */
```

---

### 4. **css/background.css** - èƒŒæ™¯æ•ˆæœæ ·å¼

**ç”¨é€”**ï¼šå®šä¹‰èƒŒæ™¯ç²’å­å’ŒåŠ¨ç”»æ•ˆæœ

**ä¸»è¦æ ·å¼**ï¼š
- **èƒŒæ™¯å®¹å™¨**ï¼šå…¨å±å›ºå®šå®šä½
- **ç²’å­æ•ˆæœ**ï¼šæµ®åŠ¨çš„å…‰ç‚¹åŠ¨ç”»
- **æ¸å˜èƒŒæ™¯**ï¼šæ·±ç©ºä¸»é¢˜çš„æ¸å˜è‰²

**å…³é”®åŠ¨ç”»**ï¼š
```css
@keyframes float {
    0%, 100% { transform: translateY(0) translateX(0); }
    50% { transform: translateY(-20px) translateX(10px); }
}
```

---

### 5. **css/sense-breathing.css** - äº”æ„ŸåŠ¨ç”»æ ·å¼

**ç”¨é€”**ï¼šå®šä¹‰äº”æ„Ÿæ˜¾ç¤ºæ¡†çš„åŠ¨ç”»æ•ˆæœ

**ä¸»è¦åŠ¨ç”»**ï¼š
- **å‘¼å¸åŠ¨ç”»** (`senseBreathing`)ï¼šäº”æ„Ÿæ¡†çš„æ³¢æµªå¼ç¼©æ”¾å’Œé˜´å½±å˜åŒ–
- **æ›´æ–°åŠ¨ç”»** (`senseUpdate`)ï¼šäº”æ„Ÿæ›´æ–°æ—¶çš„é«˜äº®æ•ˆæœ
- **é€šçŸ¥åŠ¨ç”»** (`senseNotificationPulse`)ï¼šæ„Ÿå¹å·çš„å¼¹å‡ºåŠ¨ç”»
- **æ‚¬åœå¢å¼º** (`senseBreathingHover`)ï¼šé¼ æ ‡æ‚¬åœæ—¶çš„å¢å¼ºå‘¼å¸æ•ˆæœ

**å…³é”®åŠ¨ç”»**ï¼š
```css
@keyframes senseBreathing {
    0%, 100% { transform: scale(1) translateY(0); }
    50% { transform: scale(1.05) translateY(-2px); }
}

@keyframes senseNotificationPulse {
    0% { transform: scale(0); opacity: 0; }
    50% { transform: scale(1.2); opacity: 1; }
    100% { transform: scale(1); opacity: 1; }
}
```

**å»¶è¿Ÿæ•ˆæœ**ï¼šæ¯ä¸ªäº”æ„Ÿæ¡†æœ‰ä¸åŒçš„åŠ¨ç”»å»¶è¿Ÿï¼ˆ0s, 0.2s, 0.4s, 0.6s, 0.8sï¼‰ï¼Œåˆ›é€ æ³¢æµªæ•ˆæœ

---

## ğŸ® æ ¸å¿ƒç³»ç»Ÿè¯¦è§£

### 6. **js/core/GameManager.js** - æ¸¸æˆä¸»ç®¡ç†å™¨

**ç”¨é€”**ï¼šæ¸¸æˆçš„æ€»æ§åˆ¶ä¸­å¿ƒï¼Œåè°ƒæ‰€æœ‰å­ç³»ç»Ÿ

**ä¸»è¦èŒè´£**ï¼š
1. **ç³»ç»Ÿåˆå§‹åŒ–**ï¼šåˆå§‹åŒ–æ‰€æœ‰å­ç³»ç»Ÿ
2. **è¾“å…¥å¤„ç†**ï¼šç›‘å¬é”®ç›˜å’Œé¼ æ ‡äº‹ä»¶
3. **æ¸¸æˆçŠ¶æ€ç®¡ç†**ï¼šæ§åˆ¶æ¸¸æˆçš„å¯åŠ¨ã€æš‚åœã€ç»“æŸ
4. **ç³»ç»Ÿåè°ƒ**ï¼šåœ¨å„ä¸ªç³»ç»Ÿä¹‹é—´ä¼ é€’æ¶ˆæ¯

**å…³é”®æ–¹æ³•**ï¼š
```javascript
static initialize() {
    // åˆå§‹åŒ–æ‰€æœ‰å­ç³»ç»Ÿ
    DialogueSystem.initialize();
    SimpleSenseSystem.initialize();
    BackgroundManager.initialize();
    StoryManager.initialize();
    this.setupEventListeners();
}

static handleAdvanceInput() {
    // å¤„ç†ç©å®¶çš„æ¨è¿›è¾“å…¥ï¼ˆç©ºæ ¼ã€å›è½¦ã€ç‚¹å‡»ï¼‰
    if (this.isDialogueActive) {
        DialogueSystem.handleAdvance();
    }
}

static startGame() {
    // å¯åŠ¨æ¸¸æˆä¸»å¾ªç¯
    StoryManager.startStory();
}
```

**äº‹ä»¶ç›‘å¬**ï¼š
- `keydown`ï¼šç©ºæ ¼é”®ã€å›è½¦é”®æ¨è¿›å¯¹è¯
- `click`ï¼šç‚¹å‡»å±å¹•æ¨è¿›å¯¹è¯

---

### 7. **js/core/DialogueSystem.js** - å¯¹è¯ç³»ç»Ÿ

**ç”¨é€”**ï¼šç®¡ç†å¯¹è¯çš„æ˜¾ç¤ºã€æ‰“å­—æœºæ•ˆæœå’Œäº¤äº’

**ä¸»è¦åŠŸèƒ½**ï¼š
1. **å¯¹è¯æ˜¾ç¤º**ï¼šæ˜¾ç¤º/éšè—å¯¹è¯æ¡†
2. **æ‰“å­—æœºæ•ˆæœ**ï¼šé€å­—æ˜¾ç¤ºå¯¹è¯æ–‡æœ¬
3. **è¯´è¯è€…æ ·å¼**ï¼šæ ¹æ®è§’è‰²åº”ç”¨ä¸åŒæ ·å¼
4. **å¯¹è¯æ¨è¿›**ï¼šå¤„ç†ç©å®¶çš„æ¨è¿›è¾“å…¥
5. **äº”æ„Ÿæ£€æµ‹**ï¼šæ£€æµ‹å¯¹è¯å®Œæˆåæ˜¯å¦éœ€è¦æ›´æ–°äº”æ„Ÿ

**å…³é”®æ–¹æ³•**ï¼š
```javascript
static showDialogue(dialogue) {
    // æ˜¾ç¤ºä¸€æ¡å¯¹è¯
    // 1. æ˜¾ç¤ºå¯¹è¯å®¹å™¨
    // 2. è®¾ç½®è¯´è¯è€…åç§°å’Œæ ·å¼
    // 3. å¯åŠ¨æ‰“å­—æœºæ•ˆæœ
    // 4. è¿”å› Promiseï¼Œåœ¨å¯¹è¯å®Œæˆæ—¶ resolve
}

static startTypingEffect(text, speed = 50) {
    // æ‰“å­—æœºæ•ˆæœ
    // é€å­—æ˜¾ç¤ºæ–‡æœ¬ï¼Œåˆ›é€ æ‰“å­—æœºæ•ˆæœ
}

static completeTyping() {
    // ç«‹å³å®Œæˆæ‰“å­—æœºæ•ˆæœ
    // ç”¨äºç©å®¶è·³è¿‡æ‰“å­—åŠ¨ç”»
}

static checkAndUpdateSenses() {
    // æ£€æŸ¥å½“å‰å¯¹è¯æ˜¯å¦åŒ…å«äº”æ„Ÿæ›´æ–°
    // å¦‚æœæœ‰ï¼Œè°ƒç”¨ StoryManager.updateSingleSense()
}
```

**çŠ¶æ€ç®¡ç†**ï¼š
- `isVisible`ï¼šå¯¹è¯æ¡†æ˜¯å¦å¯è§
- `isTyping`ï¼šæ˜¯å¦æ­£åœ¨æ‰“å­—
- `currentDialogue`ï¼šå½“å‰æ˜¾ç¤ºçš„å¯¹è¯å¯¹è±¡
- `typewriterInterval`ï¼šæ‰“å­—æœºå®šæ—¶å™¨

**éŸ³æ•ˆé›†æˆ**ï¼ˆå·²ç¦ç”¨ï¼‰ï¼š
- æ‰“å­—æœºéŸ³æ•ˆï¼šæ‰“å­—æ—¶æ’­æ”¾
- å¯¹è¯æ¨è¿›éŸ³æ•ˆï¼šæ¨è¿›å¯¹è¯æ—¶æ’­æ”¾

---

### 8. **js/core/SimpleSenseSystem.js** - äº”æ„Ÿæ˜¾ç¤ºç³»ç»Ÿ

**ç”¨é€”**ï¼šç®¡ç†äº”æ„Ÿä¿¡æ¯çš„æ˜¾ç¤ºã€æ›´æ–°å’ŒåŠ¨ç”»ï¼Œæ”¯æŒå·¦å³åˆ†ç¦»çš„å¬è§‰å’Œè§¦è§‰

**ä¸»è¦åŠŸèƒ½**ï¼š
1. **äº”æ„Ÿæ˜¾ç¤º**ï¼šåœ¨å±å¹•ç‰¹å®šä½ç½®æ˜¾ç¤ºäº”æ„Ÿä¿¡æ¯
2. **å·¦å³åˆ†ç¦»**ï¼šå¬è§‰å’Œè§¦è§‰æ”¯æŒå·¦å³åˆ†ç¦»æ˜¾ç¤º
3. **åŠ¨æ€ç®¡ç†**ï¼šæ”¯æŒåˆ›å»ºã€æ›´æ–°ã€åˆ é™¤äº”æ„Ÿå®ä¾‹
4. **åŠ¨ç”»æ•ˆæœ**ï¼šæ·¡å…¥æ·¡å‡ºã€ä½ç½®å˜åŒ–åŠ¨ç”»

**äº”æ„Ÿä½ç½®å¸ƒå±€**ï¼š
```javascript
// å›ºå®š7ä¸ªä½ç½®å¸ƒå±€
const sensePositions = {
    è§†è§‰: { x: '50%', y: '25%' },     // å¯¹è¯æ­£ä¸Šæ–¹
    å¬è§‰: [                           // å·¦å³è€³ä½ç½®
        { x: '20%', y: '60%' },       // å·¦è€³
        { x: '80%', y: '60%' }        // å³è€³
    ],
    è§¦è§‰: [                           // å·¦å³æ‰‹ä½ç½®
        { x: '15%', y: '85%' },       // å·¦æ‰‹
        { x: '85%', y: '85%' }        // å³æ‰‹
    ],
    å—…è§‰: { x: '50%', y: '70%' },     // å¯¹è¯æ­£ä¸‹æ–¹
    å‘³è§‰: { x: '50%', y: '90%' }      // æœ€åº•éƒ¨ä¸­å¤®
};
```

**å…³é”®æ–¹æ³•**ï¼š
```javascript
static initialize() {
    // åˆå§‹åŒ–ç³»ç»Ÿï¼Œåˆ›å»ºå®¹å™¨
}

static updateSingleSense(senseType, senseValue) {
    // æ›´æ–°å•ä¸ªäº”æ„Ÿï¼ˆå…¼å®¹æ¨¡å¼ï¼‰
    // å¬è§‰å’Œè§¦è§‰è‡ªåŠ¨åˆ›å»ºå·¦å³ä¸¤ä¸ªå®ä¾‹
}

// æ–°å¢ï¼šå·¦å³åˆ†ç¦»API
static updateLeftHearing(value) {
    // æ›´æ–°å·¦è€³å¬è§‰
}

static updateRightHearing(value) {
    // æ›´æ–°å³è€³å¬è§‰
}

static updateLeftTouch(value) {
    // æ›´æ–°å·¦æ‰‹è§¦è§‰
}

static updateRightTouch(value) {
    // æ›´æ–°å³æ‰‹è§¦è§‰
}

// åŠ¨æ€ç®¡ç†API
static createSense(id, senseType, value, position, distance = 50) {
    // åˆ›å»ºæ–°çš„äº”æ„Ÿå®ä¾‹
}

static updateSense(id, value, newDistance) {
    // æ›´æ–°æŒ‡å®šIDçš„äº”æ„Ÿå®ä¾‹
}

static removeSense(id) {
    // åˆ é™¤æŒ‡å®šIDçš„äº”æ„Ÿå®ä¾‹
}

static removeSensesByType(senseType) {
    // åˆ é™¤æŒ‡å®šç±»å‹çš„æ‰€æœ‰äº”æ„Ÿå®ä¾‹
}
```

**SenseInstance ç±»**ï¼š
```javascript
class SenseInstance {
    constructor(id, senseType, value, position, distance = 50) {
        this.id = id;                    // å”¯ä¸€æ ‡è¯†
        this.senseType = senseType;       // äº”æ„Ÿç±»å‹
        this.value = value;               // äº”æ„Ÿæè¿°
        this.position = position;         // ä½ç½®åæ ‡
        this.distance = distance;         // è·ç¦»æ„ŸçŸ¥
        this.fontSize = this.calculateFontSize();
        this.opacity = this.calculateOpacity();
    }
    
    calculateFontSize() {
        // æ ¹æ®è·ç¦»è®¡ç®—å­—ä½“å¤§å°
    }
    
    calculateOpacity() {
        // æ ¹æ®è·ç¦»è®¡ç®—é€æ˜åº¦
    }
}
```

**çŠ¶æ€ç®¡ç†**ï¼š
- `container`ï¼šäº”æ„Ÿå®¹å™¨ DOM å…ƒç´ 
- `isVisible`ï¼šäº”æ„Ÿå®¹å™¨æ˜¯å¦å¯è§
- `currentSenses`ï¼šå½“å‰äº”æ„Ÿå®ä¾‹ Mapï¼ˆkey: id, value: SenseInstanceï¼‰
- `activeSenses`ï¼šæ´»è·ƒçš„äº”æ„Ÿå…ƒç´  Map

**äº”æ„Ÿæ¡†æ ·å¼**ï¼š
```css
.dynamic-sense {
    position: absolute;
    transform: translate(-50%, -50%);
    color: rgba(255, 255, 255, 0.9);
    font-family: 'Microsoft YaHei', sans-serif;
    text-align: center;
    max-width: 200px;
    opacity: 0;
    transition: opacity 1.5s ease-in-out, transform 0.3s ease;
    text-shadow: 1px 1px 3px rgba(0, 0, 0, 0.8);
}
```

---

### 9. **js/core/BackgroundManager.js** - èƒŒæ™¯ç®¡ç†å™¨

**ç”¨é€”**ï¼šç®¡ç†æ¸¸æˆçš„èƒŒæ™¯æ•ˆæœå’Œç²’å­åŠ¨ç”»

**ä¸»è¦åŠŸèƒ½**ï¼š
1. **èƒŒæ™¯æ¸å˜**ï¼šæ·±ç©ºä¸»é¢˜çš„æ¸å˜èƒŒæ™¯
2. **ç²’å­æ•ˆæœ**ï¼šæµ®åŠ¨çš„å…‰ç‚¹ç²’å­
3. **åŠ¨æ€æ›´æ–°**ï¼šæ ¹æ®æ¸¸æˆè¿›åº¦æ”¹å˜èƒŒæ™¯

**å…³é”®æ–¹æ³•**ï¼š
```javascript
static initialize() {
    // åˆå§‹åŒ–èƒŒæ™¯ç³»ç»Ÿ
    // åˆ›å»ºèƒŒæ™¯å®¹å™¨å’Œç²’å­
}

static createParticles(count = 50) {
    // åˆ›å»ºæµ®åŠ¨ç²’å­
    // éšæœºå¤§å°ã€ä½ç½®ã€åŠ¨ç”»å»¶è¿Ÿ
}

static updateBackground(style) {
    // æ›´æ–°èƒŒæ™¯æ ·å¼
    // ç”¨äºä¸åŒåœºæ™¯çš„èƒŒæ™¯åˆ‡æ¢
}
```

---

## ğŸ“– å‰§æƒ…ç³»ç»Ÿè¯¦è§£

### 10. **js/story/StoryManager.js** - å‰§æƒ…ç®¡ç†å™¨

**ç”¨é€”**ï¼šç®¡ç†æ¸¸æˆå‰§æƒ…çš„æµç¨‹å’ŒçŠ¶æ€ï¼Œæ”¯æŒåŠ¨æ€äº”æ„Ÿç®¡ç†

**ä¸»è¦åŠŸèƒ½**ï¼š
1. **å‰§æƒ…åŠ è½½**ï¼šä»è„šæœ¬åŠ è½½å‰§æƒ…æ•°æ®
2. **å¾ªç¯ç®¡ç†**ï¼šç®¡ç†æ¸¸æˆçš„å¤šä¸ªå¾ªç¯
3. **å¯¹è¯æ’­æ”¾**ï¼šæŒ‰é¡ºåºæ’­æ”¾å¯¹è¯åºåˆ—
4. **äº”æ„Ÿè§¦å‘**ï¼šæ”¯æŒå¤šç§äº”æ„Ÿæ›´æ–°æ–¹å¼

**å…³é”®æ–¹æ³•**ï¼š
```javascript
static initialize() {
    // åˆå§‹åŒ–å‰§æƒ…ç®¡ç†å™¨
    // åŠ è½½å‰§æƒ…è„šæœ¬
}

static startStory() {
    // å¼€å§‹æ¸¸æˆå‰§æƒ…
    // ä»ç¬¬ä¸€ä¸ªå¾ªç¯å¼€å§‹
}

static playCycle(cycleNumber) {
    // æ’­æ”¾æŒ‡å®šå¾ªç¯
    // 1. æ’­æ”¾å¾ªç¯éŸ³æ•ˆ
    // 2. æ’­æ”¾å¯¹è¯åºåˆ—
}

static playPartDialogues(part) {
    // æ’­æ”¾ä¸€ä¸ª part çš„æ‰€æœ‰å¯¹è¯
    // å¤„ç† senseUpdates æ•°ç»„
}

static handleSenseUpdates(dialogue) {
    // å¤„ç† senseUpdates æ•°ç»„
    // æ”¯æŒ create, update, remove, removeByType æ“ä½œ
}

// æ–°å¢ï¼šå·¦å³åˆ†ç¦»API
static updateLeftHearing(value) {
    // æ›´æ–°å·¦è€³å¬è§‰
}

static updateRightHearing(value) {
    // æ›´æ–°å³è€³å¬è§‰
}

static updateLeftTouch(value) {
    // æ›´æ–°å·¦æ‰‹è§¦è§‰
}

static updateRightTouch(value) {
    // æ›´æ–°å³æ‰‹è§¦è§‰
}

static updateSingleSense(senseType, senseValue) {
    // æ›´æ–°å•ä¸ªäº”æ„Ÿï¼ˆå…¼å®¹æ¨¡å¼ï¼‰
    // è°ƒç”¨ SimpleSenseSystem.updateSingleSense()
}
```

**çŠ¶æ€ç®¡ç†**ï¼š
- `storyData`ï¼šå‰§æƒ…æ•°æ®å¯¹è±¡
- `currentCycle`ï¼šå½“å‰å¾ªç¯ç¼–å·
- `currentPart`ï¼šå½“å‰ part å¯¹è±¡
- `currentDialogue`ï¼šå½“å‰å¯¹è¯å¯¹è±¡

**å‰§æƒ…ç»“æ„**ï¼š
```javascript
{
    id: 'cycle_1',
    title: 'åˆé†’',
    theme: 'å­˜åœ¨çš„è´¨ç–‘',
    part1: {
        dialogues: [
            {
                speaker: 'æ—ç™½',
                text: 'æ„è¯†åƒæ²‰å…¥æ·±æµ·çš„æ½œæ°´å‘˜...',
                updateSenses: {
                    å¬è§‰: 'ä½é¢‘å—¡é¸£ï¼Œé—´æ–­çš„ç”µæµå™¼å•ªå£°'
                },
                showSenseHint: true
            }
        ]
    }
}
```

**senseUpdates æ•°ç»„æ ¼å¼**ï¼š
```javascript
{
    speaker: 'æ—ç™½',
    text: 'å¤æ‚çš„æ„Ÿå®˜ä½“éªŒ...',
    senseUpdates: [
        {
            action: 'create',
            id: 'sound_left',
            senseType: 'å¬è§‰',
            value: 'å·¦è€³ï¼šè„šæ­¥å£°',
            position: { x: '20%', y: '60%' },
            distance: 70
        },
        {
            action: 'update',
            id: 'sound_left',
            value: 'å·¦è€³ï¼šæ›´è¿‘çš„è„šæ­¥å£°',
            distance: 30
        },
        {
            action: 'remove',
            id: 'sound_left'
        },
        {
            action: 'removeByType',
            senseType: 'å¬è§‰'
        }
    ]
}
```

---

### 11. **js/story/EnhancedDeepSkyScript.js** - æ¸¸æˆå‰§æœ¬

**ç”¨é€”**ï¼šå®šä¹‰æ¸¸æˆçš„å®Œæ•´å‰§æƒ…å†…å®¹ï¼Œç§‘å¹»æ‚¬ç–‘ä¸»é¢˜

**å‰§æƒ…æ¦‚è¿°**ï¼š
- **ä¸»é¢˜**ï¼šå¤±å¿†ä¸»è§’åœ¨ç¥ç§˜å°é—­ç¯å¢ƒä¸­çš„æ¢ç´¢
- **æ ¸å¿ƒå†²çª**ï¼šè®°å¿†ç¼ºå¤±ã€ç¯å¢ƒè´¨ç–‘ã€ä¿¡ä»»å±æœºã€çœŸç›¸æ¸´æœ›
- **å¾ªç¯ç»“æ„**ï¼š3ä¸ªä¸»è¦å¾ªç¯ï¼Œæ¯ä¸ªå¾ªç¯éƒ½æœ‰æ–°å‘ç°

**å†…å®¹ç»“æ„**ï¼š
- **å¾ªç¯ï¼ˆCyclesï¼‰**ï¼šæ¸¸æˆåˆ†ä¸ºå¤šä¸ªå¾ªç¯ï¼Œæ¯ä¸ªå¾ªç¯æ˜¯ä¸€æ¬¡å®Œæ•´çš„ä½“éªŒ
- **Part**ï¼šæ¯ä¸ªå¾ªç¯åˆ†ä¸ºå¤šä¸ª partï¼Œä»£è¡¨ä¸åŒçš„å‰§æƒ…é˜¶æ®µ
- **å¯¹è¯ï¼ˆDialoguesï¼‰**ï¼šæ¯ä¸ª part åŒ…å«å¤šæ¡å¯¹è¯
- **äº”æ„Ÿæ›´æ–°ï¼ˆupdateSensesï¼‰**ï¼šåœ¨ç‰¹å®šå¯¹è¯ä¸­æ›´æ–°äº”æ„Ÿä¿¡æ¯

**ä¸‰ä¸ªä¸»è¦å¾ªç¯**ï¼š

#### **ğŸ”„ Cycle 1ï¼šåˆé†’ - å­˜åœ¨çš„è´¨ç–‘**
- **ä¸»é¢˜**ï¼šæ„è¯†æ¢å¤ï¼Œäº”æ„Ÿé€æ­¥è§‰é†’
- **ä½“éªŒ**ï¼šä»ç»å¯¹é»‘æš—å¼€å§‹ï¼Œå¬è§‰â†’è§¦è§‰â†’è§†è§‰â†’å—…è§‰â†’å‘³è§‰ä¾æ¬¡æ¢å¤
- **å…³é”®å‘ç°**ï¼šå…‰æ»‘å¹³é¢ã€è‡­æ°§å‘³ã€é‡‘å±è‹¦æ¶©å‘³

#### **ğŸ”„ Cycle 2ï¼šæ—¥å¸¸ - å»ºç«‹routine**
- **ä¸»é¢˜**ï¼šé€‚åº”æ–°ç¯å¢ƒï¼Œå»ºç«‹æ—¥å¸¸è§„å¾‹
- **ä½“éªŒ**ï¼šä¸åˆ©ç»´çš„æ—¥å¸¸äº’åŠ¨ï¼Œæ¥å—"è¥å…»æ¶²"è€ŒéçœŸå®é£Ÿç‰©
- **å…³é”®å‘ç°**ï¼šæ„Ÿå—ä¸åˆ°é˜³å…‰ã€æ¸©åº¦æ’å®šã€æ— è‡ªç„¶æ°”æ¯

#### **ğŸ”„ Cycle 3ï¼šæ¢ç´¢ - å‘ç°å¼‚å¸¸**
- **ä¸»é¢˜**ï¼šå¼€å§‹è´¨ç–‘ç¯å¢ƒï¼Œå‘ç°ä¸å¯»å¸¸çš„ç»†èŠ‚
- **ä½“éªŒ**ï¼šè§¦æ‘¸å¢™å£ã€æ¢ç´¢ç©ºé—´ï¼Œå‘ç°æ›´å¤šå¼‚å¸¸
- **å…³é”®å‘ç°**ï¼šå¢™å£å¼‚å¸¸å…‰æ»‘ã€ç¯å¢ƒéŸ³è§„å¾‹æ€§ã€é‡‘å±å‘³é“

**ç¤ºä¾‹ç»“æ„**ï¼š
```javascript
static getCycle1() {
    return {
        id: 'cycle_1',
        title: 'åˆé†’',
        theme: 'å­˜åœ¨çš„è´¨ç–‘',
        part1: {
            dialogues: [
                {
                    speaker: 'æ—ç™½',
                    text: 'æ„è¯†åƒæ²‰å…¥æ·±æµ·çš„æ½œæ°´å‘˜ï¼Œç¼“æ…¢åœ°å‘ä¸Šæµ®å‡...',
                    updateSenses: {
                        å¬è§‰: 'ä½é¢‘å—¡é¸£ï¼Œé—´æ–­çš„ç”µæµå™¼å•ªå£°'
                    },
                    showSenseHint: true
                },
                {
                    speaker: 'ä¸»è§’',
                    text: 'ï¼ˆå†…å¿ƒç‹¬ç™½ï¼‰æˆ‘åœ¨å“ªé‡Œï¼Ÿä¸ºä»€ä¹ˆä»€ä¹ˆéƒ½çœ‹ä¸è§ï¼Ÿ',
                    updateSenses: {
                        è§†è§‰: 'ç»å¯¹çš„é»‘æš—ï¼Œæ²¡æœ‰ä»»ä½•å…‰æ„Ÿ'
                    }
                }
            ]
        }
    };
}
```

**äº”æ„Ÿæ›´æ–°è§„åˆ™**ï¼š
- `updateSenses`ï¼šå¯¹è±¡ï¼Œé”®ä¸ºäº”æ„Ÿç±»å‹ï¼Œå€¼ä¸ºå…·ä½“æè¿°
- `showSenseHint`ï¼šå¸ƒå°”å€¼ï¼Œæ˜¯å¦æ˜¾ç¤º"äº”æ„Ÿæ›´æ–°"æç¤º
- äº”æ„Ÿç±»å‹ï¼š`è§†è§‰`ã€`å¬è§‰`ã€`è§¦è§‰`ã€`å—…è§‰`ã€`å‘³è§‰`

**å‰§æƒ…è®¾è®¡åŸåˆ™**ï¼š
1. **æ¸è¿›å¼æ­ç¤º**ï¼šäº”æ„Ÿä¿¡æ¯é€æ­¥å±•ç°ï¼Œä¸ä¸€æ¬¡æ€§å…¨éƒ¨æ˜¾ç¤º
2. **å…·ä½“æ„Ÿå®˜æè¿°**ï¼šé¿å…æŠ½è±¡æè¿°ï¼ˆå¦‚"ææƒ§çš„å‘³é“"ï¼‰ï¼Œä½¿ç”¨å…·ä½“æ„Ÿå®˜ä½“éªŒ
3. **å¯¹è¯é©±åŠ¨**ï¼šé€šè¿‡å¯¹è¯æ¨è¿›å‰§æƒ…ï¼Œäº”æ„Ÿä½œä¸ºè¾…åŠ©ä¿¡æ¯
4. **å¾ªç¯ç»“æ„**ï¼šæ¯ä¸ªå¾ªç¯æœ‰ç‹¬ç«‹çš„ä¸»é¢˜å’Œå‘å±•
5. **æ‚¬ç–‘æ°›å›´**ï¼šé€šè¿‡æ„Ÿå®˜ä½“éªŒè¥é€ ç´§å¼ å’Œå›°æƒ‘æ„Ÿ

---

### 12. **js/story/StoryData.js** - å‰§æƒ…æ•°æ®ç»“æ„

**ç”¨é€”**ï¼šå®šä¹‰å‰§æƒ…æ•°æ®çš„æ ‡å‡†ç»“æ„ï¼ˆå·²ç®€åŒ–ï¼Œç›´æ¥ä½¿ç”¨è„šæœ¬æ•°æ®ï¼‰

**å½“å‰å®ç°**ï¼šç›´æ¥ä½¿ç”¨ `EnhancedDeepSkyScript` æä¾›çš„æ•°æ®ç»“æ„ï¼Œæ— éœ€é¢å¤–çš„æ•°æ®ç±»

**æ•°æ®ç»“æ„**ï¼š
```javascript
// å¾ªç¯æ•°æ®ç»“æ„
{
    id: 'cycle_1',
    title: 'åˆé†’',
    theme: 'å­˜åœ¨çš„è´¨ç–‘',
    part1: {
        dialogues: [...]
    },
    part2: {
        dialogues: [...]
    },
    // ... æ›´å¤š part
}

// å¯¹è¯æ•°æ®ç»“æ„
{
    speaker: 'æ—ç™½',
    text: 'æ„è¯†åƒæ²‰å…¥æ·±æµ·çš„æ½œæ°´å‘˜...',
    updateSenses: {
        å¬è§‰: 'ä½é¢‘å—¡é¸£ï¼Œé—´æ–­çš„ç”µæµå™¼å•ªå£°'
    },
    showSenseHint: true
}

// åŠ¨æ€äº”æ„Ÿæ›´æ–°ç»“æ„
{
    speaker: 'æ—ç™½',
    text: 'å¤æ‚çš„æ„Ÿå®˜ä½“éªŒ...',
    senseUpdates: [
        {
            action: 'create',
            id: 'sound_left',
            senseType: 'å¬è§‰',
            value: 'å·¦è€³ï¼šè„šæ­¥å£°',
            position: { x: '20%', y: '60%' },
            distance: 70
        }
    ]
}
```

**æ•°æ®ç®¡ç†**ï¼š
- `StoryManager.storyData`ï¼šå½“å‰å‰§æƒ…æ•°æ®å¯¹è±¡
- `StoryManager.currentCycle`ï¼šå½“å‰å¾ªç¯ç¼–å·
- `StoryManager.currentPart`ï¼šå½“å‰ part å¯¹è±¡
- `StoryManager.currentDialogue`ï¼šå½“å‰å¯¹è¯å¯¹è±¡

---

## ğŸ”§ å·¥å…·ç³»ç»Ÿè¯¦è§£

### 13. **js/utils/AudioManager.js** - éŸ³é¢‘ç®¡ç†å™¨

**ç”¨é€”**ï¼šç®¡ç†æ¸¸æˆçš„éŸ³æ•ˆå’ŒèƒŒæ™¯éŸ³ä¹

**ä¸»è¦åŠŸèƒ½**ï¼š
1. **éŸ³æ•ˆåŠ è½½**ï¼šé¢„åŠ è½½éŸ³æ•ˆæ–‡ä»¶
2. **éŸ³æ•ˆæ’­æ”¾**ï¼šæ’­æ”¾æŒ‡å®šéŸ³æ•ˆ
3. **éŸ³é‡æ§åˆ¶**ï¼šè°ƒæ•´éŸ³æ•ˆéŸ³é‡
4. **éŸ³æ•ˆåœæ­¢**ï¼šåœæ­¢æ­£åœ¨æ’­æ”¾çš„éŸ³æ•ˆ

**å…³é”®æ–¹æ³•**ï¼š
```javascript
static initialize() {
    // åˆå§‹åŒ–éŸ³é¢‘ç³»ç»Ÿ
    // é¢„åŠ è½½éŸ³æ•ˆæ–‡ä»¶
}

static playSound(soundId, volume = 1.0) {
    // æ’­æ”¾éŸ³æ•ˆ
}

static stopSound(soundId) {
    // åœæ­¢éŸ³æ•ˆ
}

static setVolume(soundId, volume) {
    // è®¾ç½®éŸ³é‡
}
```

**éŸ³æ•ˆåˆ—è¡¨**ï¼š
- `typewriter-sound`ï¼šæ‰“å­—æœºéŸ³æ•ˆ
- `dialogue-advance-sound`ï¼šå¯¹è¯æ¨è¿›éŸ³æ•ˆ
- `sense-update-sound`ï¼šäº”æ„Ÿæ›´æ–°éŸ³æ•ˆ

**å½“å‰çŠ¶æ€**ï¼šæ‰€æœ‰éŸ³æ•ˆå·²ç¦ç”¨ï¼ˆåœ¨ DialogueSystem ä¸­æ·»åŠ äº† `return;`ï¼‰

---

### 14. **js/utils/Logger.js** - æ—¥å¿—å·¥å…·

**ç”¨é€”**ï¼šæä¾›ç»Ÿä¸€çš„æ—¥å¿—è¾“å‡ºæ¥å£

**ä¸»è¦åŠŸèƒ½**ï¼š
1. **åˆ†çº§æ—¥å¿—**ï¼šæ”¯æŒä¸åŒçº§åˆ«çš„æ—¥å¿—ï¼ˆinfo, warn, error, debugï¼‰
2. **æ¨¡å—æ ‡è¯†**ï¼šæ¯æ¡æ—¥å¿—å¸¦æœ‰æ¨¡å—åç§°
3. **å¼€å…³æ§åˆ¶**ï¼šå¯ä»¥å…¨å±€å¼€å¯/å…³é—­æ—¥å¿—

**å…³é”®æ–¹æ³•**ï¼š
```javascript
static log(module, message, level = 'info') {
    // è¾“å‡ºæ—¥å¿—
    console.log(`[${module}] ${message}`);
}

static info(module, message) {
    // ä¿¡æ¯æ—¥å¿—
}

static warn(module, message) {
    // è­¦å‘Šæ—¥å¿—
}

static error(module, message) {
    // é”™è¯¯æ—¥å¿—
}

static debug(module, message) {
    // è°ƒè¯•æ—¥å¿—
}
```

**ä½¿ç”¨ç¤ºä¾‹**ï¼š
```javascript
Logger.log('GameManager', 'æ¸¸æˆå¼€å§‹');
Logger.debug('DialogueSystem', 'æ˜¾ç¤ºå¯¹è¯: ' + dialogue.text);
```

---

## ğŸ¯ å…³é”®äº¤äº’æµç¨‹

### æ¸¸æˆå¯åŠ¨æµç¨‹

```
1. index.html åŠ è½½
   â†“
2. æ˜¾ç¤ºåŠ è½½å±å¹•
   â†“
3. åˆå§‹åŒ–æ‰€æœ‰ç³»ç»Ÿ
   - GameManager.initialize()
   - DialogueSystem.initialize()
   - SimpleSenseSystem.initialize()
   - BackgroundManager.initialize()
   - StoryManager.initialize()
   â†“
4. èƒŒæ™¯é¢œè‰²è¿‡æ¸¡ï¼ˆ3ç§’ï¼‰
   â†“
5. æ·¡å‡ºåŠ è½½å±å¹•
   â†“
6. å¯åŠ¨æ¸¸æˆ
   - GameManager.startGame()
   - StoryManager.startStory()
```

### å¯¹è¯æ’­æ”¾æµç¨‹

```
1. StoryManager.playPartDialogues(part)
   â†“
2. è·å–å½“å‰å¯¹è¯å¯¹è±¡
   â†“
3. DialogueSystem.showDialogue(dialogue)
   â†“
4. æ˜¾ç¤ºå¯¹è¯å®¹å™¨
   â†“
5. è®¾ç½®è¯´è¯è€…åç§°å’Œæ ·å¼
   â†“
6. å¯åŠ¨æ‰“å­—æœºæ•ˆæœ
   â†“
7. æ‰“å­—å®Œæˆåè°ƒç”¨ completeTyping()
   â†“
8. å¤„ç†äº”æ„Ÿæ›´æ–°
   - æ£€æŸ¥ updateSenses å±æ€§
   - å¤„ç† senseUpdates æ•°ç»„
   â†“
9. ç­‰å¾…ç©å®¶æ¨è¿›è¾“å…¥
   â†“
10. éšè—å¯¹è¯ï¼Œæ’­æ”¾ä¸‹ä¸€æ¡
```

### äº”æ„Ÿæ›´æ–°æµç¨‹

#### **å…¼å®¹æ¨¡å¼ï¼ˆupdateSensesï¼‰**ï¼š
```
1. å¯¹è¯åŒ…å« updateSenses å±æ€§
   â†“
2. StoryManager.updateSingleSense(type, value)
   â†“
3. SimpleSenseSystem.updateSingleSense(type, value)
   â†“
4. åˆ¤æ–­äº”æ„Ÿç±»å‹
   â”œâ”€ å¬è§‰/è§¦è§‰ â†’ åˆ›å»ºå·¦å³ä¸¤ä¸ªå®ä¾‹
   â””â”€ å…¶ä»–æ„Ÿå®˜ â†’ åˆ›å»ºå•ä¸ªå®ä¾‹
   â†“
5. åˆ›å»º/æ›´æ–°äº”æ„Ÿå…ƒç´ 
   â†“
6. æ·¡å…¥åŠ¨ç”»
```

#### **åŠ¨æ€æ¨¡å¼ï¼ˆsenseUpdatesï¼‰**ï¼š
```
1. å¯¹è¯åŒ…å« senseUpdates æ•°ç»„
   â†“
2. StoryManager.handleSenseUpdates(dialogue)
   â†“
3. éå† senseUpdates æ•°ç»„
   â†“
4. æ ¹æ® action æ‰§è¡Œæ“ä½œ
   â”œâ”€ create â†’ SimpleSenseSystem.createSense()
   â”œâ”€ update â†’ SimpleSenseSystem.updateSense()
   â”œâ”€ remove â†’ SimpleSenseSystem.removeSense()
   â””â”€ removeByType â†’ SimpleSenseSystem.removeSensesByType()
   â†“
5. æ›´æ–°äº”æ„Ÿæ˜¾ç¤º
```

#### **å·¦å³åˆ†ç¦»API**ï¼š
```
1. è°ƒç”¨ç‰¹å®šAPI
   - StoryManager.updateLeftHearing()
   - StoryManager.updateRightHearing()
   - StoryManager.updateLeftTouch()
   - StoryManager.updateRightTouch()
   â†“
2. ä»£ç†åˆ° SimpleSenseSystem
   â†“
3. æ›´æ–°å¯¹åº”çš„äº”æ„Ÿå®ä¾‹
```

---

## ğŸ¨ è§†è§‰è®¾è®¡è§„èŒƒ

### é¢œè‰²æ–¹æ¡ˆ

**ä¸»è‰²è°ƒ**ï¼š
- èƒŒæ™¯è‰²ï¼š`#0a0a2a` â†’ `#1a1a3a`ï¼ˆæ·±è“è‰²æ¸å˜ï¼‰
- ä¸»è¦æ–‡æœ¬ï¼š`#e0e0e0`ï¼ˆæµ…ç°è‰²ï¼‰
- å¼ºè°ƒè‰²ï¼š`#4fc3f7`ï¼ˆäº®è“è‰²ï¼‰

**è§’è‰²é¢œè‰²**ï¼š
- ä¸»è§’ï¼š`#4fc3f7`ï¼ˆäº®è“è‰²ï¼‰
- æ—ç™½ï¼š`#ff6b6b`ï¼ˆçº¢è‰²ï¼‰
- DeepSkyï¼š`#51cf66`ï¼ˆç»¿è‰²ï¼‰

**äº”æ„Ÿæ¡†é¢œè‰²**ï¼š
- èƒŒæ™¯ï¼š`#BE5869`ï¼ˆæ·±çº¢è‰²ï¼‰
- æ–‡å­—ï¼š`#403A3E`ï¼ˆæ·±ç°è‰²ï¼‰
- é˜´å½±ï¼š`#403A3E`

**è¾¹æ¡†å’Œé«˜äº®**ï¼š
- å¯¹è¯æ¡†è¾¹æ¡†ï¼š`#4fc3f7`
- äº”æ„Ÿæ›´æ–°é«˜äº®ï¼š`#66b3ff`
- æ„Ÿå¹å·é€šçŸ¥ï¼š`#66b3ff`

### åŠ¨ç”»æ—¶é•¿

- æ·¡å…¥æ·¡å‡ºï¼š0.5s - 0.8s
- æ‰“å­—æœºé€Ÿåº¦ï¼š50ms/å­—
- å‘¼å¸åŠ¨ç”»ï¼š3s å¾ªç¯
- æ›´æ–°åŠ¨ç”»ï¼š0.6s
- æ„Ÿå¹å·å¼¹å‡ºï¼š0.3s

### å¸ƒå±€è§„èŒƒ

**å¯¹è¯æ¡†**ï¼š
- ä½ç½®ï¼šåº•éƒ¨ 10%ï¼Œæ°´å¹³å±…ä¸­
- å®½åº¦ï¼š80%ï¼Œæœ€å¤§ 800px
- å†…è¾¹è·ï¼š20px

**äº”æ„Ÿæ¡†**ï¼š
- å¤§å°ï¼š104px Ã— 104px
- ä½ç½®ï¼šå±å¹•è¾¹ç¼˜ï¼ˆå·¦ä¸Šã€å·¦ä¸­ã€å·¦ä¸‹ã€å³ä¸­ã€å³ä¸‹ï¼‰
- é—´è·ï¼šè·ç¦»è¾¹ç¼˜ 3-5%

---

## ğŸ”„ æ•°æ®æµå‘

```
EnhancedDeepSkyScript.js (å‰§æœ¬æ•°æ®)
         â†“
StoryManager.js (åŠ è½½å‰§æœ¬)
         â†“
StoryData.js (æ•°æ®ç»“æ„åŒ–)
         â†“
StoryManager.js (æ’­æ”¾å¾ªç¯å’Œå¯¹è¯)
         â†“
DialogueSystem.js (æ˜¾ç¤ºå¯¹è¯)
         â†“
SimpleSenseSystem.js (æ›´æ–°äº”æ„Ÿ)
         â†“
ç”¨æˆ·ç•Œé¢ (DOM å…ƒç´ )
```

---

## ğŸ› å·²çŸ¥é—®é¢˜å’Œè§£å†³æ–¹æ¡ˆ

### 1. éŸ³æ•ˆé—®é¢˜
**é—®é¢˜**ï¼šéŸ³æ•ˆåœ¨å¯¹è¯å®Œæˆåä»ç„¶æ’­æ”¾
**è§£å†³**ï¼šåœ¨ DialogueSystem ä¸­ç¦ç”¨æ‰€æœ‰éŸ³æ•ˆï¼ˆæ·»åŠ  `return;`ï¼‰

### 2. äº”æ„Ÿä¸æ˜¾ç¤º
**é—®é¢˜**ï¼šäº”æ„Ÿæ›´æ–°æ—¶ä¸æ˜¾ç¤º
**åŸå› **ï¼š
- `currentSenses` è¢«åˆå§‹åŒ–ä¸ºç©ºå¯¹è±¡è€Œé `null`
- `storyData.currentDialogue` æœªæ­£ç¡®è®¾ç½®
- `completeTyping()` æœªè¢«è°ƒç”¨

**è§£å†³**ï¼š
- ç§»é™¤ `initialize()` ä¸­çš„ `this.currentSenses = {}`
- åœ¨ `playPartDialogues()` ä¸­è®¾ç½® `storyData.currentDialogue`
- ä¿®å¤ `startTypingEffect()` çš„å®šæ—¶å™¨é€»è¾‘

### 3. æ„Ÿå¹å·éœ€è¦ç‚¹å‡»ä¸¤æ¬¡æ‰æ¶ˆå¤±
**é—®é¢˜**ï¼šé¼ æ ‡äº¤äº’æ—¶ï¼Œæ„Ÿå¹å·å’Œå‘¼å¸åŠ¨ç”»éœ€è¦å¤šæ¬¡ç‚¹å‡»æ‰æ¶ˆå¤±
**è§£å†³**ï¼šæ·»åŠ  `isInteracted` æ ‡å¿—ï¼Œé˜²æ­¢ `fadeOutNotification` å¤šæ¬¡æ‰§è¡Œ

### 4. äº”æ„Ÿæ¡†æ ·å¼è¢«è¦†ç›–
**é—®é¢˜**ï¼š`senseElement.style.cssText +=` è¦†ç›–äº†ä¹‹å‰çš„æ ·å¼
**è§£å†³**ï¼šä½¿ç”¨ `Object.assign()` å’Œ `parsePositionString()` åˆå¹¶æ ·å¼

---

## ğŸ“ å¼€å‘æ³¨æ„äº‹é¡¹

### 1. äº”æ„Ÿæ›´æ–°è§„åˆ™
- äº”æ„Ÿæ›´æ–°å¿…é¡»åœ¨ `dialogue` å¯¹è±¡çš„ `updateSenses` å±æ€§ä¸­å®šä¹‰
- ä¸è¦åœ¨ `part` çº§åˆ«å®šä¹‰ `senses` å±æ€§ï¼ˆå·²åºŸå¼ƒï¼‰
- äº”æ„Ÿæè¿°å¿…é¡»æ˜¯å…·ä½“çš„æ„Ÿå®˜ä½“éªŒï¼Œé¿å…æŠ½è±¡æè¿°

### 2. å¯¹è¯æ¨è¿›é€»è¾‘
- å¯¹è¯æ¨è¿›ç”± `GameManager.handleAdvanceInput()` ç»Ÿä¸€å¤„ç†
- æ‰“å­—ä¸­é€”ç‚¹å‡»ä¼šç«‹å³å®Œæˆæ‰“å­—ï¼Œå†æ¬¡ç‚¹å‡»æ‰æ¨è¿›å¯¹è¯
- å¯¹è¯å®Œæˆåæ˜¾ç¤º"ç»§ç»­æç¤º"ï¼ˆé—ªçƒçš„ â–¼ï¼‰

### 3. åŠ¨ç”»æ€§èƒ½
- ä½¿ç”¨ CSS åŠ¨ç”»è€Œé JavaScript åŠ¨ç”»
- é¿å…é¢‘ç¹çš„ DOM æ“ä½œ
- ä½¿ç”¨ `transform` å’Œ `opacity` å®ç°åŠ¨ç”»ï¼ˆGPU åŠ é€Ÿï¼‰

### 4. ä»£ç ç»„ç»‡
- æ‰€æœ‰ç³»ç»Ÿä½¿ç”¨é™æ€ç±»ï¼ˆstatic classï¼‰
- ä½¿ç”¨ `Logger` è¾“å‡ºè°ƒè¯•ä¿¡æ¯
- ä¿æŒæ¨¡å—åŒ–ï¼Œæ¯ä¸ªç³»ç»ŸèŒè´£å•ä¸€

---

## ğŸš€ æœªæ¥æ‰©å±•æ–¹å‘

### 1. éŸ³æ•ˆç³»ç»Ÿ
- æ·»åŠ èƒŒæ™¯éŸ³ä¹
- å®ç°éŸ³æ•ˆæ·¡å…¥æ·¡å‡º
- ç«‹ä½“å£°éŸ³æ•ˆæ”¯æŒ
- äº”æ„ŸéŸ³æ•ˆé›†æˆ

### 2. å­˜æ¡£ç³»ç»Ÿ
- ä¿å­˜æ¸¸æˆè¿›åº¦
- æ”¯æŒå¤šä¸ªå­˜æ¡£æ§½
- è‡ªåŠ¨ä¿å­˜åŠŸèƒ½
- äº”æ„ŸçŠ¶æ€ä¿å­˜

### 3. é€‰æ‹©ç³»ç»Ÿ
- æ·»åŠ å¯¹è¯é€‰é¡¹
- å®ç°åˆ†æ”¯å‰§æƒ…
- æ ¹æ®é€‰æ‹©æ”¹å˜ç»“å±€
- äº”æ„Ÿå½±å“å‰§æƒ…èµ°å‘

### 4. è§†è§‰å¢å¼º
- æ·»åŠ è§’è‰²ç«‹ç»˜
- å®ç°åœºæ™¯åˆ‡æ¢æ•ˆæœ
- æ·»åŠ æ›´å¤šç²’å­æ•ˆæœ
- äº”æ„Ÿå¯è§†åŒ–å¢å¼º

### 5. ç§»åŠ¨ç«¯é€‚é…
- è§¦æ‘¸äº‹ä»¶æ”¯æŒ
- å“åº”å¼å¸ƒå±€ä¼˜åŒ–
- ç§»åŠ¨ç«¯æ€§èƒ½ä¼˜åŒ–
- æ‰‹åŠ¿æ§åˆ¶äº”æ„Ÿ

### 6. äº”æ„Ÿç³»ç»Ÿå¢å¼º
- æ›´å¤šäº”æ„Ÿç±»å‹ï¼ˆæ¸©åº¦ã€æ¹¿åº¦ç­‰ï¼‰
- äº”æ„Ÿç»„åˆæ•ˆæœ
- äº”æ„Ÿè®°å¿†ç³»ç»Ÿ
- äº”æ„Ÿå½±å“æ¸¸æˆæœºåˆ¶

---

## ğŸ“š å‚è€ƒèµ„æº

### æŠ€æœ¯æ ˆ
- **HTML5**ï¼šç»“æ„å’Œè¯­ä¹‰åŒ–
- **CSS3**ï¼šæ ·å¼å’ŒåŠ¨ç”»
- **JavaScript ES6+**ï¼šé€»è¾‘å’Œäº¤äº’
- **æ— æ¡†æ¶**ï¼šçº¯åŸç”Ÿ JavaScript å®ç°

### è®¾è®¡çµæ„Ÿ
- æ–‡å­—å†’é™©æ¸¸æˆï¼ˆVisual Novelï¼‰
- ç§‘å¹»ä¸»é¢˜ï¼ˆæ·±ç©ºã€AIï¼‰
- æç®€ä¸»ä¹‰ UI è®¾è®¡

---

## ğŸ“ è”ç³»ä¿¡æ¯

å¦‚æœ‰é—®é¢˜æˆ–å»ºè®®ï¼Œè¯·å‚è€ƒï¼š
- `docs/API.md`ï¼šAPI è¯¦ç»†æ–‡æ¡£
- `docs/DEV_LOG.md`ï¼šå¼€å‘æ—¥å¿—
- `README.md`ï¼šé¡¹ç›®è¯´æ˜

---

**æœ€åæ›´æ–°**ï¼š2025-01-27
**ç‰ˆæœ¬**ï¼š2.0.0
**çŠ¶æ€**ï¼šåŠŸèƒ½å®Œæ•´ï¼Œæ”¯æŒå·¦å³åˆ†ç¦»äº”æ„Ÿç³»ç»Ÿ

---

## ğŸ¯ å¿«é€Ÿå¼€å§‹æŒ‡å—

### æœ¬åœ°è¿è¡Œ
1. å…‹éš†æˆ–ä¸‹è½½é¡¹ç›®
2. ä½¿ç”¨ HTTP æœåŠ¡å™¨æ‰“å¼€ `index.html`ï¼ˆä¸èƒ½ç›´æ¥ç”¨ file:// åè®®ï¼‰
3. æ¨èä½¿ç”¨ Live Server æˆ– Python HTTP Server

### ä¿®æ”¹å‰§æœ¬
1. ç¼–è¾‘ `js/story/EnhancedDeepSkyScript.js`
2. æŒ‰ç…§ç°æœ‰ç»“æ„æ·»åŠ æ–°çš„å¾ªç¯ã€part å’Œå¯¹è¯
3. æ”¯æŒ `updateSenses` å’Œ `senseUpdates` ä¸¤ç§äº”æ„Ÿæ›´æ–°æ–¹å¼
4. åˆ·æ–°é¡µé¢æŸ¥çœ‹æ•ˆæœ

### è°ƒæ•´æ ·å¼
1. ç¼–è¾‘å¯¹åº”çš„ CSS æ–‡ä»¶
2. `main.css`ï¼šæ•´ä½“å¸ƒå±€å’Œé¢œè‰²
3. `dialogue.css`ï¼šå¯¹è¯æ¡†æ ·å¼
4. `continuous-sense.css`ï¼šäº”æ„Ÿæ˜¾ç¤ºæ ·å¼

### ä½¿ç”¨å·¦å³åˆ†ç¦»äº”æ„Ÿ
1. è°ƒç”¨ç‰¹å®šAPIï¼š
   ```javascript
   StoryManager.updateLeftHearing('å·¦è€³ï¼šè„šæ­¥å£°');
   StoryManager.updateRightHearing('å³è€³ï¼šæ°´æ»´å£°');
   StoryManager.updateLeftTouch('å·¦æ‰‹ï¼šå†°å†·');
   StoryManager.updateRightTouch('å³æ‰‹ï¼šæ¸©æš–');
   ```
2. æˆ–ä½¿ç”¨ senseUpdates æ•°ç»„ï¼š
   ```javascript
   senseUpdates: [
       {
           action: 'create',
           id: 'sound_left',
           senseType: 'å¬è§‰',
           value: 'å·¦è€³ï¼šè„šæ­¥å£°',
           position: { x: '20%', y: '60%' }
       }
   ]
   ```

### è°ƒè¯•æŠ€å·§
1. æ‰“å¼€æµè§ˆå™¨å¼€å‘è€…å·¥å…·ï¼ˆF12ï¼‰
2. æŸ¥çœ‹ Console ä¸­çš„æ—¥å¿—è¾“å‡º
3. æ‰€æœ‰ç³»ç»Ÿéƒ½æœ‰è¯¦ç»†çš„ `console.log` è¾“å‡º
4. ä½¿ç”¨ `Logger` å·¥å…·ç»Ÿä¸€ç®¡ç†æ—¥å¿—

---

**ç¥æ‚¨å¼€å‘æ„‰å¿«ï¼** ğŸ®âœ¨

